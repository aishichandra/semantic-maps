(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Se(){}function bn(e){return e()}function Ht(){return Object.create(null)}function De(e){e.forEach(bn)}function yn(e){return typeof e=="function"}function gt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function On(e){return Object.keys(e).length===0}function j(e,t){e.appendChild(t)}function ce(e,t,n){e.insertBefore(t,n||null)}function le(e){e.parentNode.removeChild(e)}function wn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function Me(e){return document.createTextNode(e)}function se(){return Me(" ")}function fe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function S(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Tn(e){return e===""?null:+e}function Ln(e){return Array.from(e.childNodes)}function je(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function qt(e,t){e.value=t==null?"":t}function Ee(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Vt(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function Pn(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function Fn(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let Ke;function We(e){Ke=e}function xn(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function It(e){xn().$$.on_mount.push(e)}function zn(){const e=xn();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=Fn(t,n,{cancelable:r});return i.slice().forEach(l=>{l.call(e,s)}),!s.defaultPrevented}return!0}}const Be=[],Ie=[],rt=[],Mt=[],Hn=Promise.resolve();let St=!1;function qn(){St||(St=!0,Hn.then(vn))}function lt(e){rt.push(e)}function Bt(e){Mt.push(e)}const wt=new Set;let Ze=0;function vn(){const e=Ke;do{for(;Ze<Be.length;){const t=Be[Ze];Ze++,We(t),Vn(t.$$)}for(We(null),Be.length=0,Ze=0;Ie.length;)Ie.pop()();for(let t=0;t<rt.length;t+=1){const n=rt[t];wt.has(n)||(wt.add(n),n())}rt.length=0}while(Be.length);for(;Mt.length;)Mt.pop()();St=!1,wt.clear(),We(e)}function Vn(e){if(e.fragment!==null){e.update(),De(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(lt)}}const it=new Set;let Te;function Bn(){Te={r:0,c:[],p:Te}}function Wn(){Te.r||De(Te.c),Te=Te.p}function ze(e,t){e&&e.i&&(it.delete(e),e.i(t))}function Ue(e,t,n,r){if(e&&e.o){if(it.has(e))return;it.add(e),Te.c.push(()=>{it.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Wt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ot(e){e&&e.c()}function pt(e,t,n,r){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),r||lt(()=>{const l=e.$$.on_mount.map(bn).filter(yn);e.$$.on_destroy?e.$$.on_destroy.push(...l):De(l),e.$$.on_mount=[]}),s.forEach(lt)}function mt(e,t){const n=e.$$;n.fragment!==null&&(De(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Un(e,t){e.$$.dirty[0]===-1&&(Be.push(e),qn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function _t(e,t,n,r,i,s,l,f=[-1]){const c=Ke;We(e);const a=e.$$={fragment:null,ctx:[],props:s,update:Se,not_equal:i,bound:Ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Ht(),dirty:f,skip_bound:!1,root:t.target||c.$$.root};l&&l(a.root);let d=!1;if(a.ctx=n?n(e,t.props||{},(m,y,...I)=>{const M=I.length?I[0]:y;return a.ctx&&i(a.ctx[m],a.ctx[m]=M)&&(!a.skip_bound&&a.bound[m]&&a.bound[m](M),d&&Un(e,m)),y}):[],a.update(),d=!0,De(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const m=Ln(t.target);a.fragment&&a.fragment.l(m),m.forEach(le)}else a.fragment&&a.fragment.c();t.intro&&ze(e.$$.fragment),pt(e,t.target,t.anchor,t.customElement),vn()}We(c)}class bt{$destroy(){mt(this,1),this.$destroy=Se}$on(t,n){if(!yn(n))return Se;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!On(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kn={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(Kn,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,l=r.IS_PAPA_WORKER||!1,f={},c=0,a={};function d(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(o){var g=Y(o);g.chunkSize=parseInt(g.chunkSize),o.step||o.chunk||(g.chunkSize=null),this._handle=new X(g),(this._handle.streamer=this)._config=g}.call(this,u),this.parseChunk=function(o,g){var p=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<p){let h=this._config.newline;h||(b=this._config.quoteChar||'"',h=this._handle.guessLineEndings(o,b)),o=[...o.split(h).slice(p)].join(h)}this.isFirstChunk&&O(this._config.beforeFirstChunk)&&(b=this._config.beforeFirstChunk(o))!==void 0&&(o=b),this.isFirstChunk=!1,this._halted=!1;var p=this._partialLine+o,b=(this._partialLine="",this._handle.parse(p,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(o=b.meta.cursor,p=(this._finished||(this._partialLine=p.substring(o-this._baseIndex),this._baseIndex=o),b&&b.data&&(this._rowCount+=b.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)r.postMessage({results:b,workerId:a.WORKER_ID,finished:p});else if(O(this._config.chunk)&&!g){if(this._config.chunk(b,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=b=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(b.data),this._completeResults.errors=this._completeResults.errors.concat(b.errors),this._completeResults.meta=b.meta),this._completed||!p||!O(this._config.complete)||b&&b.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),p||b&&b.meta.paused||this._nextChunk(),b}this._halted=!0},this._sendError=function(o){O(this._config.error)?this._config.error(o):l&&this._config.error&&r.postMessage({workerId:a.WORKER_ID,error:o,finished:!1})}}function m(u){var o;(u=u||{}).chunkSize||(u.chunkSize=a.RemoteChunkSize),d.call(this,u),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(g){this._input=g,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(o=new XMLHttpRequest,this._config.withCredentials&&(o.withCredentials=this._config.withCredentials),s||(o.onload=Q(this._chunkLoaded,this),o.onerror=Q(this._chunkError,this)),o.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var g,p=this._config.downloadRequestHeaders;for(g in p)o.setRequestHeader(g,p[g])}var b;this._config.chunkSize&&(b=this._start+this._config.chunkSize-1,o.setRequestHeader("Range","bytes="+this._start+"-"+b));try{o.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}s&&o.status===0&&this._chunkError()}},this._chunkLoaded=function(){o.readyState===4&&(o.status<200||400<=o.status?this._chunkError():(this._start+=this._config.chunkSize||o.responseText.length,this._finished=!this._config.chunkSize||this._start>=(g=>(g=g.getResponseHeader("Content-Range"))!==null?parseInt(g.substring(g.lastIndexOf("/")+1)):-1)(o),this.parseChunk(o.responseText)))},this._chunkError=function(g){g=o.statusText||g,this._sendError(new Error(g))}}function y(u){(u=u||{}).chunkSize||(u.chunkSize=a.LocalChunkSize),d.call(this,u);var o,g,p=typeof FileReader<"u";this.stream=function(b){this._input=b,g=b.slice||b.webkitSlice||b.mozSlice,p?((o=new FileReader).onload=Q(this._chunkLoaded,this),o.onerror=Q(this._chunkError,this)):o=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var b=this._input,h=(this._config.chunkSize&&(h=Math.min(this._start+this._config.chunkSize,this._input.size),b=g.call(b,this._start,h)),o.readAsText(b,this._config.encoding));p||this._chunkLoaded({target:{result:h}})},this._chunkLoaded=function(b){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(b.target.result)},this._chunkError=function(){this._sendError(o.error)}}function I(u){var o;d.call(this,u=u||{}),this.stream=function(g){return o=g,this._nextChunk()},this._nextChunk=function(){var g,p;if(!this._finished)return g=this._config.chunkSize,o=g?(p=o.substring(0,g),o.substring(g)):(p=o,""),this._finished=!o,this.parseChunk(p)}}function M(u){d.call(this,u=u||{});var o=[],g=!0,p=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(b){this._input=b,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){p&&o.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),o.length?this.parseChunk(o.shift()):g=!0},this._streamData=Q(function(b){try{o.push(typeof b=="string"?b:b.toString(this._config.encoding)),g&&(g=!1,this._checkIsFinished(),this.parseChunk(o.shift()))}catch(h){this._streamError(h)}},this),this._streamError=Q(function(b){this._streamCleanUp(),this._sendError(b)},this),this._streamEnd=Q(function(){this._streamCleanUp(),p=!0,this._streamData("")},this),this._streamCleanUp=Q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function X(u){var o,g,p,b,h=Math.pow(2,53),H=-h,W=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,k=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,E=this,L=0,w=0,F=!1,A=!1,T=[],C={data:[],errors:[],meta:{}};function te(x){return u.skipEmptyLines==="greedy"?x.join("").trim()==="":x.length===1&&x[0].length===0}function G(){if(C&&p&&(R("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),p=!1),u.skipEmptyLines&&(C.data=C.data.filter(function($){return!te($)})),ie()){let $=function(ae,ne){O(u.transformHeader)&&(ae=u.transformHeader(ae,ne)),T.push(ae)};var N=$;if(C)if(Array.isArray(C.data[0])){for(var x=0;ie()&&x<C.data.length;x++)C.data[x].forEach($);C.data.splice(0,1)}else C.data.forEach($)}function v($,ae){for(var ne=u.header?{}:[],K=0;K<$.length;K++){var q=K,he=$[K],he=((J,re)=>(ee=>(u.dynamicTypingFunction&&u.dynamicTyping[ee]===void 0&&(u.dynamicTyping[ee]=u.dynamicTypingFunction(ee)),(u.dynamicTyping[ee]||u.dynamicTyping)===!0))(J)?re==="true"||re==="TRUE"||re!=="false"&&re!=="FALSE"&&((ee=>{if(W.test(ee)&&(ee=parseFloat(ee),H<ee&&ee<h))return 1})(re)?parseFloat(re):k.test(re)?new Date(re):re===""?null:re):re)(q=u.header?K>=T.length?"__parsed_extra":T[K]:q,he=u.transform?u.transform(he,q):he);q==="__parsed_extra"?(ne[q]=ne[q]||[],ne[q].push(he)):ne[q]=he}return u.header&&(K>T.length?R("FieldMismatch","TooManyFields","Too many fields: expected "+T.length+" fields but parsed "+K,w+ae):K<T.length&&R("FieldMismatch","TooFewFields","Too few fields: expected "+T.length+" fields but parsed "+K,w+ae)),ne}var z;C&&(u.header||u.dynamicTyping||u.transform)&&(z=1,!C.data.length||Array.isArray(C.data[0])?(C.data=C.data.map(v),z=C.data.length):C.data=v(C.data,0),u.header&&C.meta&&(C.meta.fields=T),w+=z)}function ie(){return u.header&&T.length===0}function R(x,v,z,N){x={type:x,code:v,message:z},N!==void 0&&(x.row=N),C.errors.push(x)}O(u.step)&&(b=u.step,u.step=function(x){C=x,ie()?G():(G(),C.data.length!==0&&(L+=x.data.length,u.preview&&L>u.preview?g.abort():(C.data=C.data[0],b(C,E))))}),this.parse=function(x,v,z){var N=u.quoteChar||'"',N=(u.newline||(u.newline=this.guessLineEndings(x,N)),p=!1,u.delimiter?O(u.delimiter)&&(u.delimiter=u.delimiter(x),C.meta.delimiter=u.delimiter):((N=(($,ae,ne,K,q)=>{var he,J,re,ee;q=q||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var me=0;me<q.length;me++){for(var de,Re=q[me],ge=0,oe=0,Z=0,_e=(re=void 0,new V({comments:K,delimiter:Re,newline:ae,preview:10}).parse($)),we=0;we<_e.data.length;we++)ne&&te(_e.data[we])?Z++:(de=_e.data[we].length,oe+=de,re===void 0?re=de:0<de&&(ge+=Math.abs(de-re),re=de));0<_e.data.length&&(oe/=_e.data.length-Z),(J===void 0||ge<=J)&&(ee===void 0||ee<oe)&&1.99<oe&&(J=ge,he=Re,ee=oe)}return{successful:!!(u.delimiter=he),bestDelimiter:he}})(x,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess)).successful?u.delimiter=N.bestDelimiter:(p=!0,u.delimiter=a.DefaultDelimiter),C.meta.delimiter=u.delimiter),Y(u));return u.preview&&u.header&&N.preview++,o=x,g=new V(N),C=g.parse(o,v,z),G(),F?{meta:{paused:!0}}:C||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,g.abort(),o=O(u.chunk)?"":o.substring(g.getCharIndex())},this.resume=function(){E.streamer._halted?(F=!1,E.streamer.parseChunk(o,!0)):setTimeout(E.resume,3)},this.aborted=function(){return A},this.abort=function(){A=!0,g.abort(),C.meta.aborted=!0,O(u.complete)&&u.complete(C),o=""},this.guessLineEndings=function($,N){$=$.substring(0,1048576);var N=new RegExp(D(N)+"([^]*?)"+D(N),"gm"),z=($=$.replace(N,"")).split("\r"),N=$.split(`
`),$=1<N.length&&N[0].length<z[0].length;if(z.length===1||$)return`
`;for(var ae=0,ne=0;ne<z.length;ne++)z[ne][0]===`
`&&ae++;return ae>=z.length/2?`\r
`:"\r"}}function D(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(u){var o=(u=u||{}).delimiter,g=u.newline,p=u.comments,b=u.step,h=u.preview,H=u.fastMode,W=null,k=!1,E=u.quoteChar==null?'"':u.quoteChar,L=E;if(u.escapeChar!==void 0&&(L=u.escapeChar),(typeof o!="string"||-1<a.BAD_DELIMITERS.indexOf(o))&&(o=","),p===o)throw new Error("Comment character same as delimiter");p===!0?p="#":(typeof p!="string"||-1<a.BAD_DELIMITERS.indexOf(p))&&(p=!1),g!==`
`&&g!=="\r"&&g!==`\r
`&&(g=`
`);var w=0,F=!1;this.parse=function(A,T,C){if(typeof A!="string")throw new Error("Input must be a string");var te=A.length,G=o.length,ie=g.length,R=p.length,x=O(b),v=[],z=[],N=[],$=w=0;if(!A)return ge();if(H||H!==!1&&A.indexOf(E)===-1){for(var ae=A.split(g),ne=0;ne<ae.length;ne++){if(N=ae[ne],w+=N.length,ne!==ae.length-1)w+=g.length;else if(C)return ge();if(!p||N.substring(0,R)!==p){if(x){if(v=[],ee(N.split(o)),oe(),F)return ge()}else ee(N.split(o));if(h&&h<=ne)return v=v.slice(0,h),ge(!0)}}return ge()}for(var K=A.indexOf(o,w),q=A.indexOf(g,w),he=new RegExp(D(L)+D(E),"g"),J=A.indexOf(E,w);;)if(A[w]===E)for(J=w,w++;;){if((J=A.indexOf(E,J+1))===-1)return C||z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:v.length,index:w}),de();if(J===te-1)return de(A.substring(w,J).replace(he,E));if(E===L&&A[J+1]===L)J++;else if(E===L||J===0||A[J-1]!==L){K!==-1&&K<J+1&&(K=A.indexOf(o,J+1));var re=me((q=q!==-1&&q<J+1?A.indexOf(g,J+1):q)===-1?K:Math.min(K,q));if(A.substr(J+1+re,G)===o){N.push(A.substring(w,J).replace(he,E)),A[w=J+1+re+G]!==E&&(J=A.indexOf(E,w)),K=A.indexOf(o,w),q=A.indexOf(g,w);break}if(re=me(q),A.substring(J+1+re,J+1+re+ie)===g){if(N.push(A.substring(w,J).replace(he,E)),Re(J+1+re+ie),K=A.indexOf(o,w),J=A.indexOf(E,w),x&&(oe(),F))return ge();if(h&&v.length>=h)return ge(!0);break}z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:v.length,index:w}),J++}}else if(p&&N.length===0&&A.substring(w,w+R)===p){if(q===-1)return ge();w=q+ie,q=A.indexOf(g,w),K=A.indexOf(o,w)}else if(K!==-1&&(K<q||q===-1))N.push(A.substring(w,K)),w=K+G,K=A.indexOf(o,w);else{if(q===-1)break;if(N.push(A.substring(w,q)),Re(q+ie),x&&(oe(),F))return ge();if(h&&v.length>=h)return ge(!0)}return de();function ee(Z){v.push(Z),$=w}function me(Z){var _e=0;return _e=Z!==-1&&(Z=A.substring(J+1,Z))&&Z.trim()===""?Z.length:_e}function de(Z){return C||(Z===void 0&&(Z=A.substring(w)),N.push(Z),w=te,ee(N),x&&oe()),ge()}function Re(Z){w=Z,ee(N),N=[],q=A.indexOf(g,w)}function ge(Z){if(u.header&&!T&&v.length&&!k){var _e=v[0],we={},Oe=new Set(_e);let Ve=!1;for(let xe=0;xe<_e.length;xe++){let pe=_e[xe];if(we[pe=O(u.transformHeader)?u.transformHeader(pe,xe):pe]){let Ae,ve=we[pe];for(;Ae=pe+"_"+ve,ve++,Oe.has(Ae););Oe.add(Ae),_e[xe]=Ae,we[pe]++,Ve=!0,(W=W===null?{}:W)[Ae]=pe}else we[pe]=1,_e[xe]=pe;Oe.add(pe)}Ve&&console.warn("Duplicate headers found and renamed."),k=!0}return{data:v,errors:z,meta:{delimiter:o,linebreak:g,aborted:F,truncated:!!Z,cursor:$+(T||0),renamedHeaders:W}}}function oe(){b(ge()),v=[],z=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return w}}function ue(u){var o=u.data,g=f[o.workerId],p=!1;if(o.error)g.userError(o.error,o.file);else if(o.results&&o.results.data){var b={abort:function(){p=!0,_(o.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(O(g.userStep)){for(var h=0;h<o.results.data.length&&(g.userStep({data:o.results.data[h],errors:o.results.errors,meta:o.results.meta},b),!p);h++);delete o.results}else O(g.userChunk)&&(g.userChunk(o.results,b,o.file),delete o.results)}o.finished&&!p&&_(o.workerId,o.results)}function _(u,o){var g=f[u];O(g.userComplete)&&g.userComplete(o),g.terminate(),delete f[u]}function B(){throw new Error("Not implemented.")}function Y(u){if(typeof u!="object"||u===null)return u;var o,g=Array.isArray(u)?[]:{};for(o in u)g[o]=Y(u[o]);return g}function Q(u,o){return function(){u.apply(o,arguments)}}function O(u){return typeof u=="function"}return a.parse=function(u,o){var g=(o=o||{}).dynamicTyping||!1;if(O(g)&&(o.dynamicTypingFunction=g,g={}),o.dynamicTyping=g,o.transform=!!O(o.transform)&&o.transform,!o.worker||!a.WORKERS_SUPPORTED)return g=null,a.NODE_STREAM_INPUT,typeof u=="string"?(u=(p=>p.charCodeAt(0)!==65279?p:p.slice(1))(u),g=new(o.download?m:I)(o)):u.readable===!0&&O(u.read)&&O(u.on)?g=new M(o):(r.File&&u instanceof File||u instanceof Object)&&(g=new y(o)),g.stream(u);(g=(()=>{var p;return!!a.WORKERS_SUPPORTED&&(p=(()=>{var b=r.URL||r.webkitURL||null,h=n.toString();return a.BLOB_URL||(a.BLOB_URL=b.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",h,")();"],{type:"text/javascript"})))})(),(p=new r.Worker(p)).onmessage=ue,p.id=c++,f[p.id]=p)})()).userStep=o.step,g.userChunk=o.chunk,g.userComplete=o.complete,g.userError=o.error,o.step=O(o.step),o.chunk=O(o.chunk),o.complete=O(o.complete),o.error=O(o.error),delete o.worker,g.postMessage({input:u,config:o,workerId:g.id})},a.unparse=function(u,o){var g=!1,p=!0,b=",",h=`\r
`,H='"',W=H+H,k=!1,E=null,L=!1,w=((()=>{if(typeof o=="object"){if(typeof o.delimiter!="string"||a.BAD_DELIMITERS.filter(function(T){return o.delimiter.indexOf(T)!==-1}).length||(b=o.delimiter),typeof o.quotes!="boolean"&&typeof o.quotes!="function"&&!Array.isArray(o.quotes)||(g=o.quotes),typeof o.skipEmptyLines!="boolean"&&typeof o.skipEmptyLines!="string"||(k=o.skipEmptyLines),typeof o.newline=="string"&&(h=o.newline),typeof o.quoteChar=="string"&&(H=o.quoteChar),typeof o.header=="boolean"&&(p=o.header),Array.isArray(o.columns)){if(o.columns.length===0)throw new Error("Option columns is empty");E=o.columns}o.escapeChar!==void 0&&(W=o.escapeChar+H),o.escapeFormulae instanceof RegExp?L=o.escapeFormulae:typeof o.escapeFormulae=="boolean"&&o.escapeFormulae&&(L=/^[=+\-@\t\r].*$/)}})(),new RegExp(D(H),"g"));if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return F(null,u,k);if(typeof u[0]=="object")return F(E||Object.keys(u[0]),u,k)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||E),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),F(u.fields||[],u.data||[],k);throw new Error("Unable to serialize unrecognized input");function F(T,C,te){var G="",ie=(typeof T=="string"&&(T=JSON.parse(T)),typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(T)&&0<T.length),R=!Array.isArray(C[0]);if(ie&&p){for(var x=0;x<T.length;x++)0<x&&(G+=b),G+=A(T[x],x);0<C.length&&(G+=h)}for(var v=0;v<C.length;v++){var z=(ie?T:C[v]).length,N=!1,$=ie?Object.keys(C[v]).length===0:C[v].length===0;if(te&&!ie&&(N=te==="greedy"?C[v].join("").trim()==="":C[v].length===1&&C[v][0].length===0),te==="greedy"&&ie){for(var ae=[],ne=0;ne<z;ne++){var K=R?T[ne]:ne;ae.push(C[v][K])}N=ae.join("").trim()===""}if(!N){for(var q=0;q<z;q++){0<q&&!$&&(G+=b);var he=ie&&R?T[q]:q;G+=A(C[v][he],q)}v<C.length-1&&(!te||0<z&&!$)&&(G+=h)}}return G}function A(T,C){var te,G;return T==null?"":T.constructor===Date?JSON.stringify(T).slice(1,25):(G=!1,L&&typeof T=="string"&&L.test(T)&&(T="'"+T,G=!0),te=T.toString().replace(w,W),(G=G||g===!0||typeof g=="function"&&g(T,C)||Array.isArray(g)&&g[C]||((ie,R)=>{for(var x=0;x<R.length;x++)if(-1<ie.indexOf(R[x]))return!0;return!1})(te,a.BAD_DELIMITERS)||-1<te.indexOf(b)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?H+te+H:te)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!s&&!!r.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=V,a.ParserHandle=X,a.NetworkStreamer=m,a.FileStreamer=y,a.StringStreamer=I,a.ReadableStreamStreamer=M,r.jQuery&&((i=r.jQuery).fn.parse=function(u){var o=u.config||{},g=[];return this.each(function(h){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)g.push({file:this.files[H],inputElem:this,instanceConfig:i.extend({},o)})}),p(),this;function p(){if(g.length===0)O(u.complete)&&u.complete();else{var h,H,W,k,E=g[0];if(O(u.before)){var L=u.before(E.file,E.inputElem);if(typeof L=="object"){if(L.action==="abort")return h="AbortError",H=E.file,W=E.inputElem,k=L.reason,void(O(u.error)&&u.error({name:h},H,W,k));if(L.action==="skip")return void b();typeof L.config=="object"&&(E.instanceConfig=i.extend(E.instanceConfig,L.config))}else if(L==="skip")return void b()}var w=E.instanceConfig.complete;E.instanceConfig.complete=function(F){O(w)&&w(F,E.file,E.inputElem),b()},a.parse(E.file,E.instanceConfig)}}function b(){g.splice(0,1),p()}}),l&&(r.onmessage=function(u){u=u.data,a.WORKER_ID===void 0&&u&&(a.WORKER_ID=u.workerId),typeof u.input=="string"?r.postMessage({workerId:a.WORKER_ID,results:a.parse(u.input,u.config),finished:!0}):(r.File&&u.input instanceof File||u.input instanceof Object)&&(u=a.parse(u.input,u.config))&&r.postMessage({workerId:a.WORKER_ID,results:u,finished:!0})}),(m.prototype=Object.create(d.prototype)).constructor=m,(y.prototype=Object.create(d.prototype)).constructor=y,(I.prototype=Object.create(I.prototype)).constructor=I,(M.prototype=Object.create(d.prototype)).constructor=M,a})})(kn);const Qn=kn.exports;function st(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mn(e){let t,n,r;e.length!==2?(t=st,n=(f,c)=>st(e(f),c),r=(f,c)=>e(f)-c):(t=e===st||e===Xn?e:Yn,n=e,r=e);function i(f,c,a=0,d=f.length){if(a<d){if(t(c,c)!==0)return d;do{const m=a+d>>>1;n(f[m],c)<0?a=m+1:d=m}while(a<d)}return a}function s(f,c,a=0,d=f.length){if(a<d){if(t(c,c)!==0)return d;do{const m=a+d>>>1;n(f[m],c)<=0?a=m+1:d=m}while(a<d)}return a}function l(f,c,a=0,d=f.length){const m=i(f,c,a,d-1);return m>a&&r(f[m-1],c)>-r(f[m],c)?m-1:m}return{left:i,center:l,right:s}}function Yn(){return 0}function Gn(e){return e===null?NaN:+e}const Jn=Mn(st),Zn=Jn.right;Mn(Gn).center;const $n=Zn;class Ut extends Map{constructor(t,n=nr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Kt(this,t))}has(t){return super.has(Kt(this,t))}set(t,n){return super.set(er(this,t),n)}delete(t){return super.delete(tr(this,t))}}function Kt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function er({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function tr({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function nr(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Et=Math.sqrt(50),Ct=Math.sqrt(10),Rt=Math.sqrt(2);function rr(e,t,n){var r,i=-1,s,l,f;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(f=Sn(e,t,n))===0||!isFinite(f))return[];if(f>0){let c=Math.round(e/f),a=Math.round(t/f);for(c*f<e&&++c,a*f>t&&--a,l=new Array(s=a-c+1);++i<s;)l[i]=(c+i)*f}else{f=-f;let c=Math.round(e*f),a=Math.round(t*f);for(c/f<e&&++c,a/f>t&&--a,l=new Array(s=a-c+1);++i<s;)l[i]=(c+i)/f}return r&&l.reverse(),l}function Sn(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Et?10:s>=Ct?5:s>=Rt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Et?10:s>=Ct?5:s>=Rt?2:1)}function ir(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Et?i*=10:s>=Ct?i*=5:s>=Rt&&(i*=2),t<e?-i:i}function Qt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Xt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function En(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Yt=Symbol("implicit");function Cn(){var e=new Ut,t=[],n=[],r=Yt;function i(s){let l=e.get(s);if(l===void 0){if(r!==Yt)return r;e.set(s,l=t.push(s)-1)}return n[l%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Ut;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Cn(t,n).unknown(r)},En.apply(i,arguments),i}function Tt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ge(){}var Qe=.7,ut=1/Qe,He="\\s*([+-]?\\d+)\\s*",Xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sr=/^#([0-9a-f]{3,8})$/,ar=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),or=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),lr=new RegExp(`^rgba\\(${He},${He},${He},${Xe}\\)$`),ur=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${Xe}\\)$`),fr=new RegExp(`^hsl\\(${Xe},${Ce},${Ce}\\)$`),cr=new RegExp(`^hsla\\(${Xe},${Ce},${Ce},${Xe}\\)$`),Gt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tt(Ge,Ye,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jt,formatHex:Jt,formatHex8:hr,formatHsl:dr,formatRgb:Zt,toString:Zt});function Jt(){return this.rgb().formatHex()}function hr(){return this.rgb().formatHex8()}function dr(){return Dn(this).formatHsl()}function Zt(){return this.rgb().formatRgb()}function Ye(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$t(t):n===3?new ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$e(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$e(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ar.exec(e))?new ye(t[1],t[2],t[3],1):(t=or.exec(e))?new ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lr.exec(e))?$e(t[1],t[2],t[3],t[4]):(t=ur.exec(e))?$e(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fr.exec(e))?nn(t[1],t[2]/100,t[3]/100,1):(t=cr.exec(e))?nn(t[1],t[2]/100,t[3]/100,t[4]):Gt.hasOwnProperty(e)?$t(Gt[e]):e==="transparent"?new ye(NaN,NaN,NaN,0):null}function $t(e){return new ye(e>>16&255,e>>8&255,e&255,1)}function $e(e,t,n,r){return r<=0&&(e=t=n=NaN),new ye(e,t,n,r)}function gr(e){return e instanceof Ge||(e=Ye(e)),e?(e=e.rgb(),new ye(e.r,e.g,e.b,e.opacity)):new ye}function Dt(e,t,n,r){return arguments.length===1?gr(e):new ye(e,t,n,r==null?1:r)}function ye(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Tt(ye,Dt,Rn(Ge,{brighter(e){return e=e==null?ut:Math.pow(ut,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qe:Math.pow(Qe,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ye(Pe(this.r),Pe(this.g),Pe(this.b),ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatHex8:pr,formatRgb:tn,toString:tn}));function en(){return`#${Le(this.r)}${Le(this.g)}${Le(this.b)}`}function pr(){return`#${Le(this.r)}${Le(this.g)}${Le(this.b)}${Le((isNaN(this.opacity)?1:this.opacity)*255)}`}function tn(){const e=ft(this.opacity);return`${e===1?"rgb(":"rgba("}${Pe(this.r)}, ${Pe(this.g)}, ${Pe(this.b)}${e===1?")":`, ${e})`}`}function ft(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Le(e){return e=Pe(e),(e<16?"0":"")+e.toString(16)}function nn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ke(e,t,n,r)}function Dn(e){if(e instanceof ke)return new ke(e.h,e.s,e.l,e.opacity);if(e instanceof Ge||(e=Ye(e)),!e)return new ke;if(e instanceof ke)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),l=NaN,f=s-i,c=(s+i)/2;return f?(t===s?l=(n-r)/f+(n<r)*6:n===s?l=(r-t)/f+2:l=(t-n)/f+4,f/=c<.5?s+i:2-s-i,l*=60):f=c>0&&c<1?0:l,new ke(l,f,c,e.opacity)}function mr(e,t,n,r){return arguments.length===1?Dn(e):new ke(e,t,n,r==null?1:r)}function ke(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tt(ke,mr,Rn(Ge,{brighter(e){return e=e==null?ut:Math.pow(ut,e),new ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qe:Math.pow(Qe,e),new ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ye(xt(e>=240?e-240:e+120,i,r),xt(e,i,r),xt(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ke(rn(this.h),et(this.s),et(this.l),ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ft(this.opacity);return`${e===1?"hsl(":"hsla("}${rn(this.h)}, ${et(this.s)*100}%, ${et(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rn(e){return e=(e||0)%360,e<0?e+360:e}function et(e){return Math.max(0,Math.min(1,e||0))}function xt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lt=e=>()=>e;function _r(e,t){return function(n){return e+n*t}}function br(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yr(e){return(e=+e)==1?An:function(t,n){return n-t?br(t,n,e):Lt(isNaN(t)?n:t)}}function An(e,t){var n=t-e;return n?_r(e,n):Lt(isNaN(e)?t:e)}const sn=function e(t){var n=yr(t);function r(i,s){var l=n((i=Dt(i)).r,(s=Dt(s)).r),f=n(i.g,s.g),c=n(i.b,s.b),a=An(i.opacity,s.opacity);return function(d){return i.r=l(d),i.g=f(d),i.b=c(d),i.opacity=a(d),i+""}}return r.gamma=e,r}(1);function wr(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function xr(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vr(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),l;for(l=0;l<r;++l)i[l]=Pt(e[l],t[l]);for(;l<n;++l)s[l]=t[l];return function(f){for(l=0;l<r;++l)s[l]=i[l](f);return s}}function kr(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Mr(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Pt(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var At=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vt=new RegExp(At.source,"g");function Sr(e){return function(){return e}}function Er(e){return function(t){return e(t)+""}}function Cr(e,t){var n=At.lastIndex=vt.lastIndex=0,r,i,s,l=-1,f=[],c=[];for(e=e+"",t=t+"";(r=At.exec(e))&&(i=vt.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),f[l]?f[l]+=s:f[++l]=s),(r=r[0])===(i=i[0])?f[l]?f[l]+=i:f[++l]=i:(f[++l]=null,c.push({i:l,x:ct(r,i)})),n=vt.lastIndex;return n<t.length&&(s=t.slice(n),f[l]?f[l]+=s:f[++l]=s),f.length<2?c[0]?Er(c[0].x):Sr(t):(t=c.length,function(a){for(var d=0,m;d<t;++d)f[(m=c[d]).i]=m.x(a);return f.join("")})}function Pt(e,t){var n=typeof t,r;return t==null||n==="boolean"?Lt(t):(n==="number"?ct:n==="string"?(r=Ye(t))?(t=r,sn):Cr:t instanceof Ye?sn:t instanceof Date?kr:xr(t)?wr:Array.isArray(t)?vr:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Mr:ct)(e,t)}function Rr(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Dr(e){return function(){return e}}function Ar(e){return+e}var an=[0,1];function Fe(e){return e}function Nt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Dr(isNaN(t)?NaN:.5)}function Nr(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function jr(e,t,n){var r=e[0],i=e[1],s=t[0],l=t[1];return i<r?(r=Nt(i,r),s=n(l,s)):(r=Nt(r,i),s=n(s,l)),function(f){return s(r(f))}}function Ir(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),l=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<r;)i[l]=Nt(e[l],e[l+1]),s[l]=n(t[l],t[l+1]);return function(f){var c=$n(e,f,1,r)-1;return s[c](i[c](f))}}function Or(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Tr(){var e=an,t=an,n=Pt,r,i,s,l=Fe,f,c,a;function d(){var y=Math.min(e.length,t.length);return l!==Fe&&(l=Nr(e[0],e[y-1])),f=y>2?Ir:jr,c=a=null,m}function m(y){return y==null||isNaN(y=+y)?s:(c||(c=f(e.map(r),t,n)))(r(l(y)))}return m.invert=function(y){return l(i((a||(a=f(t,e.map(r),ct)))(y)))},m.domain=function(y){return arguments.length?(e=Array.from(y,Ar),d()):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),d()):t.slice()},m.rangeRound=function(y){return t=Array.from(y),n=Rr,d()},m.clamp=function(y){return arguments.length?(l=y?!0:Fe,d()):l!==Fe},m.interpolate=function(y){return arguments.length?(n=y,d()):n},m.unknown=function(y){return arguments.length?(s=y,m):s},function(y,I){return r=y,i=I,d()}}function Lr(){return Tr()(Fe,Fe)}function Pr(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ht(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function qe(e){return e=ht(Math.abs(e)),e?e[1]:NaN}function Fr(e,t){return function(n,r){for(var i=n.length,s=[],l=0,f=e[0],c=0;i>0&&f>0&&(c+f+1>r&&(f=Math.max(1,r-c)),s.push(n.substring(i-=f,i+f)),!((c+=f+1)>r));)f=e[l=(l+1)%e.length];return s.reverse().join(t)}}function zr(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Hr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dt(e){if(!(t=Hr.exec(e)))throw new Error("invalid format: "+e);var t;return new Ft({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}dt.prototype=Ft.prototype;function Ft(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ft.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qr(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Nn;function Vr(e,t){var n=ht(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Nn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ht(e,Math.max(0,t+s-1))[0]}function on(e,t){var n=ht(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ln={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Pr,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>on(e*100,t),r:on,s:Vr,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function un(e){return e}var fn=Array.prototype.map,cn=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Br(e){var t=e.grouping===void 0||e.thousands===void 0?un:Fr(fn.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?un:zr(fn.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function a(m){m=dt(m);var y=m.fill,I=m.align,M=m.sign,X=m.symbol,D=m.zero,V=m.width,ue=m.comma,_=m.precision,B=m.trim,Y=m.type;Y==="n"?(ue=!0,Y="g"):ln[Y]||(_===void 0&&(_=12),B=!0,Y="g"),(D||y==="0"&&I==="=")&&(D=!0,y="0",I="=");var Q=X==="$"?n:X==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",O=X==="$"?r:/[%p]/.test(Y)?l:"",u=ln[Y],o=/[defgprs%]/.test(Y);_=_===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function g(p){var b=Q,h=O,H,W,k;if(Y==="c")h=u(p)+h,p="";else{p=+p;var E=p<0||1/p<0;if(p=isNaN(p)?c:u(Math.abs(p),_),B&&(p=qr(p)),E&&+p==0&&M!=="+"&&(E=!1),b=(E?M==="("?M:f:M==="-"||M==="("?"":M)+b,h=(Y==="s"?cn[8+Nn/3]:"")+h+(E&&M==="("?")":""),o){for(H=-1,W=p.length;++H<W;)if(k=p.charCodeAt(H),48>k||k>57){h=(k===46?i+p.slice(H+1):p.slice(H))+h,p=p.slice(0,H);break}}}ue&&!D&&(p=t(p,1/0));var L=b.length+p.length+h.length,w=L<V?new Array(V-L+1).join(y):"";switch(ue&&D&&(p=t(w+p,w.length?V-h.length:1/0),w=""),I){case"<":p=b+p+h+w;break;case"=":p=b+w+p+h;break;case"^":p=w.slice(0,L=w.length>>1)+b+p+h+w.slice(L);break;default:p=w+b+p+h;break}return s(p)}return g.toString=function(){return m+""},g}function d(m,y){var I=a((m=dt(m),m.type="f",m)),M=Math.max(-8,Math.min(8,Math.floor(qe(y)/3)))*3,X=Math.pow(10,-M),D=cn[8+M/3];return function(V){return I(X*V)+D}}return{format:a,formatPrefix:d}}var tt,jn,In;Wr({thousands:",",grouping:[3],currency:["$",""]});function Wr(e){return tt=Br(e),jn=tt.format,In=tt.formatPrefix,tt}function Ur(e){return Math.max(0,-qe(Math.abs(e)))}function Kr(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qe(t)/3)))*3-qe(Math.abs(e)))}function Qr(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qe(t)-qe(e))+1}function Xr(e,t,n,r){var i=ir(e,t,n),s;switch(r=dt(r==null?",f":r),r.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Kr(i,l))&&(r.precision=s),In(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Qr(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ur(i))&&(r.precision=s-(r.type==="%")*2);break}}return jn(r)}function Yr(e){var t=e.domain;return e.ticks=function(n){var r=t();return rr(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Xr(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,l=r[i],f=r[s],c,a,d=10;for(f<l&&(a=l,l=f,f=a,a=i,i=s,s=a);d-- >0;){if(a=Sn(l,f,n),a===c)return r[i]=l,r[s]=f,t(r);if(a>0)l=Math.floor(l/a)*a,f=Math.ceil(f/a)*a;else if(a<0)l=Math.ceil(l*a)/a,f=Math.floor(f*a)/a;else break;c=a}return e},e}function jt(){var e=Lr();return e.copy=function(){return Or(e,jt())},En.apply(e,arguments),Yr(e)}function Gr(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Jr=Gr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Zr(e){let t;return{c(){t=P("p"),t.textContent="Hover over a circle to see details here.",S(t,"class","svelte-60srhh")},m(n,r){ce(n,t,r)},p:Se,d(n){n&&le(t)}}}function $r(e){let t,n=e[0].title+"",r,i,s,l=e[0][e[1]]+"",f,c,a,d=e[0].date.toISOString().split("T")[0]+"",m,y,I,M=e[0].text+"",X;return{c(){t=P("h1"),r=Me(n),i=se(),s=P("span"),f=Me(l),c=se(),a=P("h2"),m=Me(d),y=se(),I=P("p"),X=Me(M),S(t,"class","svelte-60srhh"),Ee(s,"background",e[2](e[0][e[1]])),S(s,"class","svelte-60srhh"),S(a,"class","svelte-60srhh"),S(I,"class","svelte-60srhh")},m(D,V){ce(D,t,V),j(t,r),ce(D,i,V),ce(D,s,V),j(s,f),ce(D,c,V),ce(D,a,V),j(a,m),ce(D,y,V),ce(D,I,V),j(I,X)},p(D,V){V&1&&n!==(n=D[0].title+"")&&je(r,n),V&3&&l!==(l=D[0][D[1]]+"")&&je(f,l),V&7&&Ee(s,"background",D[2](D[0][D[1]])),V&1&&d!==(d=D[0].date.toISOString().split("T")[0]+"")&&je(m,d),V&1&&M!==(M=D[0].text+"")&&je(X,M)},d(D){D&&le(t),D&&le(i),D&&le(s),D&&le(c),D&&le(a),D&&le(y),D&&le(I)}}}function ei(e){let t;function n(s,l){return s[0]?$r:Zr}let r=n(e),i=r(e);return{c(){t=P("div"),i.c(),S(t,"class","detail-card svelte-60srhh")},m(s,l){ce(s,t,l),i.m(t,null)},p(s,[l]){r===(r=n(s))&&i?i.p(s,l):(i.d(1),i=r(s),i&&(i.c(),i.m(t,null)))},i:Se,o:Se,d(s){s&&le(t),i.d()}}}function ti(e,t,n){let{hoveredData:r}=t,{domainColumn:i}=t,{data:s}=t,{colorScale:l}=t;return It(()=>{l.domain(s.map(f=>f[i]))}),e.$$set=f=>{"hoveredData"in f&&n(0,r=f.hoveredData),"domainColumn"in f&&n(1,i=f.domainColumn),"data"in f&&n(3,s=f.data),"colorScale"in f&&n(2,l=f.colorScale)},[r,i,l,s]}class ni extends bt{constructor(t){super(),_t(this,t,ti,ei,gt,{hoveredData:0,domainColumn:1,data:3,colorScale:2})}}function ri(e){let t,n,r,i,s,l,f;return i=new ni({props:{hoveredData:e[3],data:e[0],domainColumn:e[1],colorScale:e[4]}}),{c(){t=P("div"),n=P("canvas"),r=se(),Ot(i.$$.fragment),S(n,"width",at),S(n,"height",ot),S(n,"class","svelte-14rtzz4"),S(t,"class","chart-container svelte-14rtzz4")},m(c,a){ce(c,t,a),j(t,n),e[17](n),j(t,r),pt(i,t,null),s=!0,l||(f=[fe(n,"mousemove",e[5]),fe(n,"mouseleave",e[6])],l=!0)},p(c,[a]){const d={};a&8&&(d.hoveredData=c[3]),a&1&&(d.data=c[0]),a&2&&(d.domainColumn=c[1]),i.$set(d)},i(c){s||(ze(i.$$.fragment,c),s=!0)},o(c){Ue(i.$$.fragment,c),s=!1},d(c){c&&le(t),e[17](null),mt(i),l=!1,De(f)}}}let at=800,ot=600;const kt=6;let nt=1;function ii(e,t,n){let r,i,s,l,f,{data:c=[]}=t,{domainColumn:a=""}=t,{opacity:d=1}=t,{selectedValues:m=new Set}=t,{searchQuery:y=""}=t,{showAnnotations:I=!0}=t,{highlightedData:M=[]}=t,{startDate:X=null}=t,{endDate:D=null}=t,V=[{x:500,y:400,radius:30,label:"Border Belt Independent and North Carolina Coastal Federation have both published about GenX \u2014 an industrial chemical.",label_x:-400,label_y:-80},{x:720,y:170,radius:50,label:"Only Carolina Peacemaker seems to be publishing about personal health.",label_x:-100,label_y:130}],ue,_;const B={top:20,right:20,bottom:20,left:20};let Y=null,Q=null,O={x:0,y:0};const u=Cn().domain([...new Set(c.map(h=>h[a]))]).range(Jr);function o(){!_||!c.length||(_.clearRect(0,0,at,ot),_.save(),_.translate(O.x,O.y),_.scale(nt,nt),_.translate(-O.x,-O.y),c.forEach(h=>{var E;const H=y&&((E=h.title)==null?void 0:E.toLowerCase().includes(y.toLowerCase())),W=r.has(h.id)||H;m.has(h[a]);const k=(!X||h.date>=X)&&(!D||h.date<=D);_.beginPath(),_.arc(B.left+l(h.x),B.top+f(h.y),kt,0,Math.PI*2),n(14,_.fillStyle=u(h[a]),_),k?n(14,_.globalAlpha=1,_):n(14,_.globalAlpha=d*.2,_),_.fill(),W&&(n(14,_.lineWidth=1.5,_),n(14,_.strokeStyle="#000",_),_.stroke())}),I&&V.forEach(h=>{n(14,_.globalAlpha=1,_),_.beginPath(),_.arc(h.x,h.y,h.radius,0,Math.PI*2),n(14,_.strokeStyle="red",_),n(14,_.lineWidth=2,_),_.setLineDash([5,5]),_.stroke();const H=180,W=12;n(14,_.font="16px Arial",_);const k=h.x+h.label_x,E=h.y+h.label_y;let L=0,w=0,F=[];if(h.label){const z=h.label.split(" ");let N="";z.forEach(($,ae)=>{const ne=N+$+" ";_.measureText(ne).width>H&&ae>0?(F.push(N),L=Math.max(L,_.measureText(N).width),N=$+" "):N=ne}),F.push(N),L=Math.max(L,_.measureText(N).width),w=W*F.length}const A=k,T=E-W,C=L,te=w;let G,ie;h.x<A?G=A:h.x>A+C?G=A+C:G=h.x,h.y<T?ie=T:h.y>T+te?ie=T+te:ie=h.y;const R=Math.atan2(ie-h.y,G-h.x),x=h.x+h.radius*Math.cos(R),v=h.y+h.radius*Math.sin(R);if(_.setLineDash([]),_.beginPath(),_.moveTo(x,v),_.lineTo(G,ie),n(14,_.strokeStyle="red",_),n(14,_.lineWidth=1,_),_.stroke(),h.label){n(14,_.font="16px Arial",_),n(14,_.fillStyle="red",_);const z=16;F.forEach((N,$)=>{_.fillText(N,k,E+$*z)})}}),_.setLineDash([]),Y&&(_.beginPath(),_.arc(B.left+l(Y.x),B.top+f(Y.y),kt,0,Math.PI*2),n(14,_.fillStyle=u(Y[a]),_),n(14,_.globalAlpha=1,_),_.fill(),n(14,_.strokeStyle="black",_),n(14,_.lineWidth=2,_),_.stroke()),_.restore())}function g(h){const H=ue.getBoundingClientRect(),W=at/H.width,k=ot/H.height,E=(h.clientX-H.left)*W-B.left,L=(h.clientY-H.top)*k-B.top,w=(E-O.x)/nt+O.x,F=(L-O.y)/nt+O.y,A=c.find(T=>{const C=l(T.x)-w,te=f(T.y)-F;return Math.sqrt(C*C+te*te)<kt+3});A?(n(3,Y=A),Q=A):n(3,Y=Q),o()}function p(){n(3,Y=Q),o()}It(()=>{n(14,_=ue.getContext("2d")),o()});function b(h){Ie[h?"unshift":"push"](()=>{ue=h,n(2,ue)})}return e.$$set=h=>{"data"in h&&n(0,c=h.data),"domainColumn"in h&&n(1,a=h.domainColumn),"opacity"in h&&n(7,d=h.opacity),"selectedValues"in h&&n(8,m=h.selectedValues),"searchQuery"in h&&n(9,y=h.searchQuery),"showAnnotations"in h&&n(10,I=h.showAnnotations),"highlightedData"in h&&n(11,M=h.highlightedData),"startDate"in h&&n(12,X=h.startDate),"endDate"in h&&n(13,D=h.endDate)},e.$$.update=()=>{e.$$.dirty&2048&&(r=new Set(M.map(h=>h.id))),e.$$.dirty&65537&&(l=jt().domain([Xt(c,h=>h.x),Qt(c,h=>h.x)]).range([0,i])),e.$$.dirty&32769&&(f=jt().domain([Xt(c,h=>h.y),Qt(c,h=>h.y)]).range([s,0])),e.$$.dirty&16385&&_&&c.length&&o(),e.$$.dirty&30595&&_&&c.length&&o()},n(16,i=at-B.left-B.right),n(15,s=ot-B.top-B.bottom),[c,a,ue,Y,u,g,p,d,m,y,I,M,X,D,_,s,i,b]}class si extends bt{constructor(t){super(),_t(this,t,ii,ri,gt,{data:0,domainColumn:1,opacity:7,selectedValues:8,searchQuery:9,showAnnotations:10,highlightedData:11,startDate:12,endDate:13})}}function ai(e){let t,n,r,i,s,l,f,c,a;return{c(){t=P("div"),n=P("div"),r=P("div"),i=se(),s=P("div"),l=se(),f=P("div"),S(r,"class","track-inner svelte-vytkle"),S(n,"class","track svelte-vytkle"),S(s,"class","thumb start-thumb svelte-vytkle"),Ee(s,"left",e[4]+"%"),S(f,"class","thumb end-thumb svelte-vytkle"),Ee(f,"left",e[3]+"%"),S(t,"class","range-slider svelte-vytkle"),Ee(t,"--start-percent",e[4]+"%"),Ee(t,"--end-percent",e[3]+"%")},m(d,m){ce(d,t,m),j(t,n),j(n,r),j(t,i),j(t,s),e[13](s),j(t,l),j(t,f),e[16](f),e[19](t),c||(a=[fe(r,"mousedown",e[11]),fe(r,"touchstart",e[12]),fe(s,"mousedown",e[14]),fe(s,"touchstart",e[15]),fe(f,"mousedown",e[17]),fe(f,"touchstart",e[18])],c=!0)},p(d,[m]){m&16&&Ee(s,"left",d[4]+"%"),m&8&&Ee(f,"left",d[3]+"%"),m&16&&Ee(t,"--start-percent",d[4]+"%"),m&8&&Ee(t,"--end-percent",d[3]+"%")},i:Se,o:Se,d(d){d&&le(t),e[13](null),e[16](null),e[19](null),c=!1,De(a)}}}function oi(e,t,n){let r,i,{min:s=0}=t,{max:l=100}=t,{startValue:f}=t,{endValue:c}=t;const a=zn();let d,m,y,I=!1,M=null,X=null,D=0;function V(k,E){I=!0,M=E,X=d.getBoundingClientRect(),E==="range"&&(D=c-f),window.addEventListener("mousemove",ue),window.addEventListener("mouseup",_)}function ue(k){if(!I)return;const E=Math.min(Math.max(0,(k.clientX-X.left)/X.width),1),L=Math.round(E*(l-s)+s);if(M==="start")n(7,f=Math.min(L,c)),a("startChange",f);else if(M==="end")n(8,c=Math.max(L,f)),a("endChange",c);else if(M==="range"){let w=L-Math.floor(D/2),F=L+Math.ceil(D/2);w<s&&(w=s,F=s+D),F>l&&(F=l,w=l-D),w=Math.max(s,w),F=Math.min(l,F),n(7,f=w),n(8,c=F),a("startChange",f),a("endChange",c)}}function _(){I=!1,window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",_)}function B(k,E){k.preventDefault(),I=!0,M=E,X=d.getBoundingClientRect(),E==="range"&&(D=c-f),window.addEventListener("touchmove",Y,{passive:!1}),window.addEventListener("touchend",Q)}function Y(k){if(k.preventDefault(),!I)return;const E=k.touches[0],L=Math.min(Math.max(0,(E.clientX-X.left)/X.width),1),w=Math.round(L*(l-s)+s);if(M==="start")n(7,f=Math.min(w,c)),a("startChange",f);else if(M==="end")n(8,c=Math.max(w,f)),a("endChange",c);else if(M==="range"){let F=w-Math.floor(D/2),A=w+Math.ceil(D/2);F<s&&(F=s,A=s+D),A>l&&(A=l,F=l-D),F=Math.max(s,F),A=Math.min(l,A),n(7,f=F),n(8,c=A),a("startChange",f),a("endChange",c)}}function Q(){I=!1,window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",Q)}const O=k=>V(k,"range"),u=k=>B(k,"range");function o(k){Ie[k?"unshift":"push"](()=>{m=k,n(1,m)})}const g=k=>V(k,"start"),p=k=>B(k,"start");function b(k){Ie[k?"unshift":"push"](()=>{y=k,n(2,y)})}const h=k=>V(k,"end"),H=k=>B(k,"end");function W(k){Ie[k?"unshift":"push"](()=>{d=k,n(0,d)})}return e.$$set=k=>{"min"in k&&n(9,s=k.min),"max"in k&&n(10,l=k.max),"startValue"in k&&n(7,f=k.startValue),"endValue"in k&&n(8,c=k.endValue)},e.$$.update=()=>{e.$$.dirty&1664&&n(4,r=l>s?(f-s)/(l-s)*100:0),e.$$.dirty&1792&&n(3,i=l>s?(c-s)/(l-s)*100:100)},[d,m,y,i,r,V,B,f,c,s,l,O,u,o,g,p,b,h,H,W]}class li extends bt{constructor(t){super(),_t(this,t,oi,ai,gt,{min:9,max:10,startValue:7,endValue:8})}}function hn(e,t,n){const r=e.slice();return r[43]=t[n],r}function dn(e,t,n){const r=e.slice();return r[46]=t[n],r}function gn(e){let t,n,r,i,s,l,f=e[8],c=[];for(let a=0;a<f.length;a+=1)c[a]=pn(dn(e,f,a));return{c(){t=P("label"),t.textContent="\u{1F3A8} Color by Column:",n=se(),r=P("select"),i=P("option"),i.textContent="Select column";for(let a=0;a<c.length;a+=1)c[a].c();S(t,"for","domain-column"),S(t,"class","svelte-bcjotp"),i.__value="",i.value=i.__value,i.disabled=!0,S(r,"id","domain-column"),S(r,"class","svelte-bcjotp"),e[0]===void 0&&lt(()=>e[24].call(r))},m(a,d){ce(a,t,d),ce(a,n,d),ce(a,r,d),j(r,i);for(let m=0;m<c.length;m+=1)c[m].m(r,null);Vt(r,e[0]),s||(l=[fe(r,"change",e[15]),fe(r,"change",e[24])],s=!0)},p(a,d){if(d[0]&256){f=a[8];let m;for(m=0;m<f.length;m+=1){const y=dn(a,f,m);c[m]?c[m].p(y,d):(c[m]=pn(y),c[m].c(),c[m].m(r,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=f.length}d[0]&257&&Vt(r,a[0])},d(a){a&&le(t),a&&le(n),a&&le(r),wn(c,a),s=!1,De(l)}}}function pn(e){let t,n=e[46]+"",r,i;return{c(){t=P("option"),r=Me(n),t.__value=i=e[46],t.value=t.__value},m(s,l){ce(s,t,l),j(t,r)},p(s,l){l[0]&256&&n!==(n=s[46]+"")&&je(r,n),l[0]&256&&i!==(i=s[46])&&(t.__value=i,t.value=t.__value)},d(s){s&&le(t)}}}function mn(e){let t,n,r,i,s,l=e[9],f=[];for(let c=0;c<l.length;c+=1)f[c]=_n(hn(e,l,c));return{c(){t=P("label"),t.textContent="\u2728 Highlight Values:",n=se(),r=P("select");for(let c=0;c<f.length;c+=1)f[c].c();S(t,"for","value-select"),S(t,"class","svelte-bcjotp"),S(r,"id","value-select"),r.multiple=!0,S(r,"size","5"),S(r,"class","multi-select svelte-bcjotp")},m(c,a){ce(c,t,a),ce(c,n,a),ce(c,r,a);for(let d=0;d<f.length;d+=1)f[d].m(r,null);i||(s=fe(r,"change",e[16]),i=!0)},p(c,a){if(a[0]&512){l=c[9];let d;for(d=0;d<l.length;d+=1){const m=hn(c,l,d);f[d]?f[d].p(m,a):(f[d]=_n(m),f[d].c(),f[d].m(r,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=l.length}},d(c){c&&le(t),c&&le(n),c&&le(r),wn(f,c),i=!1,s()}}}function _n(e){let t,n=e[43]+"",r,i;return{c(){t=P("option"),r=Me(n),t.__value=i=e[43],t.value=t.__value},m(s,l){ce(s,t,l),j(t,r)},p(s,l){l[0]&512&&n!==(n=s[43]+"")&&je(r,n),l[0]&512&&i!==(i=s[43])&&(t.__value=i,t.value=t.__value)},d(s){s&&le(t)}}}function ui(e){let t;return{c(){t=Me("\u25B6")},m(n,r){ce(n,t,r)},d(n){n&&le(t)}}}function fi(e){let t;return{c(){t=Me("\u275A\u275A")},m(n,r){ce(n,t,r)},d(n){n&&le(t)}}}function ci(e){let t;return{c(){t=P("p"),t.textContent="Loading data..."},m(n,r){ce(n,t,r)},p:Se,i:Se,o:Se,d(n){n&&le(t)}}}function hi(e){let t,n;return t=new si({props:{data:e[11],domainColumn:e[0],selectedValues:e[1],opacity:e[10],searchQuery:e[13],showAnnotations:e[14],highlightedData:e[7],startDate:e[2],endDate:e[3]}}),{c(){Ot(t.$$.fragment)},m(r,i){pt(t,r,i),n=!0},p(r,i){const s={};i[0]&2048&&(s.data=r[11]),i[0]&1&&(s.domainColumn=r[0]),i[0]&2&&(s.selectedValues=r[1]),i[0]&1024&&(s.opacity=r[10]),i[0]&8192&&(s.searchQuery=r[13]),i[0]&16384&&(s.showAnnotations=r[14]),i[0]&128&&(s.highlightedData=r[7]),i[0]&4&&(s.startDate=r[2]),i[0]&8&&(s.endDate=r[3]),t.$set(s)},i(r){n||(ze(t.$$.fragment,r),n=!0)},o(r){Ue(t.$$.fragment,r),n=!1},d(r){mt(t,r)}}}function di(e){let t,n,r,i,s,l,f,c,a,d,m,y,I,M,X,D,V,ue,_,B,Y,Q,O,u,o,g,p,b,h,H,W,k,E,L,w,F,A=Ne(e[2])+"",T,C,te,G=Ne(e[3])+"",ie,R,x,v,z,N,$,ae,ne,K,q,he,J,re,ee,me,de,Re,ge,oe=e[8].length&&gn(e),Z=e[9].length&&mn(e);function _e(U){e[28](U)}function we(U){e[29](U)}let Oe={min:0,max:e[4].length-1};e[5]!==void 0&&(Oe.startValue=e[5]),e[6]!==void 0&&(Oe.endValue=e[6]),W=new li({props:Oe}),Ie.push(()=>Wt(W,"startValue",_e)),Ie.push(()=>Wt(W,"endValue",we)),W.$on("startChange",e[30]),W.$on("endChange",e[31]);function Ve(U,be){return U[12]?fi:ui}let xe=Ve(e),pe=xe(e);const Ae=[hi,ci],ve=[];function zt(U,be){return U[11].length?0:1}return ee=zt(e),me=ve[ee]=Ae[ee](e),{c(){t=P("div"),n=P("div"),n.innerHTML=`<h1 class="title svelte-bcjotp">North Carolina Semantic Map [DEMO]</h1> 
    <p class="subtitle svelte-bcjotp">This semantic map contains data from three organizations in North Carolina. <a href="https://peacemakeronline.com/">Carolina Peacemaker</a> and <a href="https://borderbelt.org">Border Belt</a> are local news organizations and <a href="https://www.nccoast.org/about-us/">NC Coastal Federation</a> is a nonprofit focused on coastal restoration.</p>`,r=se(),i=P("div"),s=P("div"),l=P("div"),l.innerHTML=`<details close=""><summary class="svelte-bcjotp">\u2795 What is a Semantic Map?</summary> 
          <div class="nerd-box-content svelte-bcjotp"><p class="svelte-bcjotp">Semantic maps are tools that allow users to visually explore how different topics and ideas are connected. 
              By analyzing the relationships between articles, these maps can reveal patterns and clusters in the data.</p> 
            <p class="svelte-bcjotp">Each dot in this semantic map represents an article. When the dots are closer together, the articles are similar in meaning.</p> 
            <p class="svelte-bcjotp">Newsrooms can use semantic maps to:</p> 
            <ul class="svelte-bcjotp"><li class="svelte-bcjotp">Audit their coverage by identifying themes that may be underrepresented or overlooked.</li> 
              <li class="svelte-bcjotp">Track how their editorial focus evolves over time.</li> 
              <li class="svelte-bcjotp">Discover which topics are being covered by other outlets, offering opportunities to adjust their editorial focus or collaborate.</li></ul></div></details>`,f=se(),c=P("label"),c.textContent="\u{1F4C1} Upload CSV:",a=se(),d=P("input"),m=se(),y=P("label"),y.textContent="\u{1F50D} Search Title:",I=se(),M=P("input"),X=se(),oe&&oe.c(),D=se(),Z&&Z.c(),V=se(),ue=P("label"),ue.textContent="\u{1F4A1} Adjust Opacity:",_=se(),B=P("input"),Y=se(),Q=P("div"),O=P("label"),O.textContent="\u{1F4C5} Date Range:",u=se(),o=P("input"),p=se(),b=P("input"),H=se(),Ot(W.$$.fragment),L=se(),w=P("div"),F=P("span"),T=Me(A),C=se(),te=P("span"),ie=Me(G),R=se(),x=P("div"),v=P("button"),v.textContent="-1W",z=se(),N=P("button"),N.textContent="-1D",$=se(),ae=P("button"),pe.c(),ne=se(),K=P("button"),K.textContent="+1D",q=se(),he=P("button"),he.textContent="+1W",J=se(),re=P("div"),me.c(),S(n,"class","title-section svelte-bcjotp"),S(l,"class","nerd-box svelte-bcjotp"),S(c,"for","file-upload"),S(c,"class","svelte-bcjotp"),S(d,"id","file-upload"),S(d,"type","file"),S(d,"accept",".csv"),S(d,"class","svelte-bcjotp"),S(y,"for","search-input"),S(y,"class","svelte-bcjotp"),S(M,"id","search-input"),S(M,"type","text"),S(M,"placeholder","Search..."),S(M,"class","svelte-bcjotp"),S(ue,"for","opacity-slider"),S(ue,"class","svelte-bcjotp"),S(B,"id","opacity-slider"),S(B,"type","range"),S(B,"min","0.01"),S(B,"max","1"),S(B,"step","0.1"),S(B,"class","svelte-bcjotp"),S(O,"for","start-date"),S(O,"class","svelte-bcjotp"),S(o,"id","start-date"),S(o,"type","date"),o.value=g=Ne(e[2]),S(o,"class","svelte-bcjotp"),S(b,"id","end-date"),S(b,"type","date"),b.value=h=Ne(e[3]),S(b,"class","svelte-bcjotp"),S(w,"class","date-range-labels svelte-bcjotp"),S(v,"class","svelte-bcjotp"),S(N,"class","svelte-bcjotp"),S(ae,"class","play-button svelte-bcjotp"),S(K,"class","svelte-bcjotp"),S(he,"class","svelte-bcjotp"),S(x,"class","date-navigation svelte-bcjotp"),S(Q,"class","date-controls svelte-bcjotp"),S(s,"class","filter-panel svelte-bcjotp"),S(re,"class","scatterplot-container svelte-bcjotp"),S(i,"class","content svelte-bcjotp"),S(t,"class","container svelte-bcjotp")},m(U,be){ce(U,t,be),j(t,n),j(t,r),j(t,i),j(i,s),j(s,l),j(s,f),j(s,c),j(s,a),j(s,d),j(s,m),j(s,y),j(s,I),j(s,M),j(s,X),oe&&oe.m(s,null),j(s,D),Z&&Z.m(s,null),j(s,V),j(s,ue),j(s,_),j(s,B),qt(B,e[10]),j(s,Y),j(s,Q),j(Q,O),j(Q,u),j(Q,o),j(Q,p),j(Q,b),j(Q,H),pt(W,Q,null),j(Q,L),j(Q,w),j(w,F),j(F,T),j(w,C),j(w,te),j(te,ie),j(Q,R),j(Q,x),j(x,v),j(x,z),j(x,N),j(x,$),j(x,ae),pe.m(ae,null),j(x,ne),j(x,K),j(x,q),j(x,he),j(i,J),j(i,re),ve[ee].m(re,null),de=!0,Re||(ge=[fe(d,"change",e[18]),fe(M,"input",e[21]),fe(B,"change",e[25]),fe(B,"input",e[25]),fe(B,"input",e[22]),fe(o,"change",e[26]),fe(b,"change",e[27]),fe(v,"click",e[32]),fe(N,"click",e[33]),fe(ae,"click",e[20]),fe(K,"click",e[34]),fe(he,"click",e[35])],Re=!0)},p(U,be){U[8].length?oe?oe.p(U,be):(oe=gn(U),oe.c(),oe.m(s,D)):oe&&(oe.d(1),oe=null),U[9].length?Z?Z.p(U,be):(Z=mn(U),Z.c(),Z.m(s,V)):Z&&(Z.d(1),Z=null),be[0]&1024&&qt(B,U[10]),(!de||be[0]&4&&g!==(g=Ne(U[2])))&&(o.value=g),(!de||be[0]&8&&h!==(h=Ne(U[3])))&&(b.value=h);const Je={};be[0]&16&&(Je.max=U[4].length-1),!k&&be[0]&32&&(k=!0,Je.startValue=U[5],Bt(()=>k=!1)),!E&&be[0]&64&&(E=!0,Je.endValue=U[6],Bt(()=>E=!1)),W.$set(Je),(!de||be[0]&4)&&A!==(A=Ne(U[2])+"")&&je(T,A),(!de||be[0]&8)&&G!==(G=Ne(U[3])+"")&&je(ie,G),xe!==(xe=Ve(U))&&(pe.d(1),pe=xe(U),pe&&(pe.c(),pe.m(ae,null)));let yt=ee;ee=zt(U),ee===yt?ve[ee].p(U,be):(Bn(),Ue(ve[yt],1,1,()=>{ve[yt]=null}),Wn(),me=ve[ee],me?me.p(U,be):(me=ve[ee]=Ae[ee](U),me.c()),ze(me,1),me.m(re,null))},i(U){de||(ze(W.$$.fragment,U),ze(me),de=!0)},o(U){Ue(W.$$.fragment,U),Ue(me),de=!1},d(U){U&&le(t),oe&&oe.d(),Z&&Z.d(),mt(W),pe.d(),ve[ee].d(),Re=!1,De(ge)}}}function Ne(e){return e?e.toISOString().split("T")[0]:""}function gi(e,t,n){let r=[],i=[],s="org",l=[],f=new Set,c=.5,a=null,d=null,m=[],y=[],I=0,M=0,X=!1,D=null,V=[],ue="",_=!0;It(async()=>{const x=await(await fetch("/semantic-maps/data.csv")).text();return B(x),()=>{D&&clearInterval(D)}});function B(R){const x=Qn.parse(R,{header:!0});n(23,r=x.data.filter(v=>v.x&&v.y&&v.date).map((v,z)=>({...v,x:+v.x,y:+v.y,date:new Date(v.date),id:z}))),n(8,i=x.meta.fields||[]),n(4,y=[...new Set(r.map(v=>v.date.getTime()))].sort((v,z)=>v-z).map(v=>new Date(v))),n(2,a=y[0]),n(3,d=y[y.length-1]),n(5,I=0),n(6,M=y.length-1),s&&n(9,l=[...new Set(r.map(v=>v[s]).filter(Boolean))])}function Y(R){n(0,s=R.target.value),n(9,l=s?[...new Set(r.map(x=>x[s]).filter(Boolean))]:[]),n(1,f=new Set),n(14,_=!1)}function Q(R){const x=[...R.target.selectedOptions].map(N=>N.value),v=r.filter(N=>(!a||N.date>=a)&&(!d||N.date<=d)),z=new Set(v.map(N=>N[s]));n(1,f=new Set(x.filter(N=>z.has(N)))),n(7,V=v.filter(N=>f.has(N[s]))),n(14,_=!1)}function O(R,x,v=!1){v?(n(2,a=y[R]||y[0]),n(3,d=y[x]||y[y.length-1])):(n(2,a=R),n(3,d=x)),n(14,_=!1)}function u(){if(a){const R=a.getTime();n(5,I=Math.max(0,y.findIndex(x=>x.getTime()>=R)))}else n(5,I=0);if(d){const R=d.getTime(),x=y.findIndex(v=>v.getTime()>=R);n(6,M=x>=0?x:y.length>0?y.length-1:0)}else n(6,M=y.length-1);I>M&&n(5,I=M),M<I&&n(6,M=I)}function o(R,x){if(R.detail!==void 0)x==="start"?(n(5,I=R.detail),I>M&&n(5,I=M)):(n(6,M=R.detail),M<I&&n(6,M=I)),O(I,M,!0);else{const v=R.target.value?new Date(R.target.value):null;x==="start"?O(v,d):O(a,v),u()}}function g(R){const x=R.target.files[0];if(x){const v=new FileReader;n(14,_=!1),v.onload=z=>B(z.target.result),v.readAsText(x)}}function p(R){const x=M-I;let v=I+R,z=M+R;v<0&&(v=0,z=x),z>=y.length&&(z=y.length-1,v=Math.max(0,z-x)),n(5,I=v),n(6,M=z),O(I,M,!0)}function b(){X?(clearInterval(D),n(12,X=!1)):(n(12,X=!0),n(14,_=!1),D=setInterval(()=>{if(M>=y.length-1){clearInterval(D),n(12,X=!1);return}p(1)},500))}function h(R){n(13,ue=R.target.value),n(14,_=!1)}function H(){n(14,_=!1)}function W(){s=Pn(this),n(0,s),n(8,i)}function k(){c=Tn(this.value),n(10,c)}const E=R=>o(R,"start"),L=R=>o(R,"end");function w(R){I=R,n(5,I)}function F(R){M=R,n(6,M)}const A=R=>o(R,"start"),T=R=>o(R,"end"),C=()=>p(-7),te=()=>p(-1),G=()=>p(1),ie=()=>p(7);return e.$$.update=()=>{e.$$.dirty[0]&128&&new Set(V.map(R=>R.id)),e.$$.dirty[0]&8388623&&n(11,m=r.map(R=>({...R,isHighlighted:f.has(R[s])&&a&&d&&R.date>=a&&R.date<=d}))),e.$$.dirty[0]&48&&y.length>1&&I/(y.length-1)*100,e.$$.dirty[0]&80&&y.length>1&&M/(y.length-1)*100},[s,f,a,d,y,I,M,V,i,l,c,m,X,ue,_,Y,Q,o,g,p,b,h,H,r,W,k,E,L,w,F,A,T,C,te,G,ie]}class pi extends bt{constructor(t){super(),_t(this,t,gi,di,gt,{},null,[-1,-1])}}new pi({target:document.getElementById("app")});
